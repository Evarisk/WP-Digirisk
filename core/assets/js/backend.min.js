"use strict";function get_treated_element(i){var e={action:"wpdigi-dtrans-get-done-element",element:i};jQuery.post(ajaxurl,e,function(e){var t;for(t=0;t<e.transfert.length;t++)jQuery("#digi-datas-transfert-progression-container-"+e.transfert[t].type).html(e.transfert[t].text);e.auto_reload&&setTimeout(function(){get_treated_element(i)},"500")},"json")}var regex={validateEmail:function(i){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(i)}};jQuery(document).ready(function(i){digi_global.init(i),legal_display.init(i),digi_recommendation.init(!0,i),digi_risk.init(!0,i),digi_danger.init(!0,i),digi_search.event(i),digi_tools.event(i),digi_installer.event(i),digi_global.event(i),digi_evaluation_method.event(i),digi_evaluator.event(i),file_management.event(i),wpeo_gallery.event(i),digi_group.event(i),digi_society.event(i),digi_workunit.event(i),digi_tab.event(i),digi_user.event(i)});var digi_global={$:void 0,init:function(i){digi_global.$=i,digi_global.$(".wpdigi_date").datepicker({dateFormat:"dd/mm/yy"})},event:function(){digi_global.$(document).on("click","toggle, .digi-toggle",function(i){i.stopPropagation();var e,t=digi_global.$(this),n=digi_global.$(this).data("parent");e=void 0!==n?digi_global.$(this).closest("."+n).find("."+digi_global.$(this).data("target")):digi_global.$(this).parent().find("."+digi_global.$(this).data("target")),digi_global.$(".digi-popup").each(function(){0===digi_global.$(this).has(i.target).length&&digi_global.$(this).is(":visible")&&!digi_global.$(this).hasClass(t.data("target"))&&digi_global.$(this).hide()}),e.toggle()}),digi_global.$(document).on("click",function(i){digi_global.$(".digi-popup").each(function(){0===digi_global.$(this).has(i.target).length&&digi_global.$(this).is(":visible")&&digi_global.$(this).toggle()})})},responsive_menu_toggle:function(){digi_global.$(".wp-digi-sheet-tab-responsive-content").toggle("fast"),digi_global.$(".wp-digi-sheet-tab-title").toggleClass("active")}},digi_danger={old_danger:void 0,$:void 0,init:function(i,e){digi_danger.$=e,(i||void 0===i)&&digi_danger.event(),this.old_danger=digi_danger.$(".wp-digi-risk-item-new toggle").html()},event:function(){digi_danger.$(document).on("click",".wp-digi-risk-item-new .wp-digi-select-list li",function(i){digi_danger.select_danger(i,digi_danger.$(this))})},select_danger:function(i,e){digi_danger.$('.wp-digi-risk-item-new input[name="danger_id"]').val(digi_danger.$(e).data("id")),digi_danger.$(".wp-digi-risk-item-new toggle span").html(digi_danger.$(e).find("img").attr("title"))},reset_create_form:function(){digi_danger.$(".wp-digi-risk-item-new toggle").html(digi_danger.old_danger),digi_danger.$('.wp-digi-risk-item-new input[name="danger_id"]').val("")}},digi_evaluation_method={$:void 0,event:function(i){digi_evaluation_method.$=i,digi_evaluation_method.$(document).on("keyup",function(i){digi_evaluation_method.keyup(i,digi_evaluation_method.$(this))}),digi_evaluation_method.$(document).on("click","ul.wp-digi-risk-cotation-chooser li",function(i){digi_evaluation_method.select_cotation(i,digi_evaluation_method.$(this))}),digi_evaluation_method.$(document).on("click",".wpdigi-method-evaluation-render .row li",function(i){digi_evaluation_method.select_variable(i,digi_evaluation_method.$(this))}),digi_evaluation_method.$(document).on("click",".wpdigi-method-evaluation-render .wp-digi-bton-fourth",function(){digi_evaluation_method.close_modal(digi_evaluation_method.$(this))}),digi_evaluation_method.$(document).on("click",".wpdigi-method-evaluation-render .dashicons-no-alt",function(){digi_evaluation_method.close_modal(digi_evaluation_method.$(".wpdigi-method-evaluation-render .wp-digi-bton-fourth").click())})},keyup:function(i){27==i.keyCode&&digi_evaluation_method.$(".wpdigi-method-evaluation-render .dashicons-no-alt").click()},select_cotation:function(i,e){i.preventDefault();var t=digi_evaluation_method.$(e).closest("span"),n=digi_evaluation_method.$(e).attr("data-level"),d=digi_evaluation_method.$(e).closest(".wp-digi-list-item").find("input.digi-method-simple").val(),a=t.find("div"),o=a[0];o.className=o.className.replace(/wp-digi-risk-level-[0-4]/,"wp-digi-risk-level-"+n),a.html(""),digi_evaluation_method.$(e).closest("form").find(".risk-level").val(n),digi_evaluation_method.$(e).closest(".wp-digi-list-item").find('input[name="method_evaluation_id"]').val(d)},select_variable:function(i,e){"undefined"!=digi_evaluation_method.$(e).data("seuil-id")&&(digi_evaluation_method.$('.wpdigi-method-evaluation-render .row li[data-variable-id="'+digi_evaluation_method.$(e).data("variable-id")+'"]').removeClass("active"),digi_evaluation_method.$(e).addClass("active"),digi_evaluation_method.$('.wpdigi-method-evaluation-render input[name="variable['+digi_evaluation_method.$(e).data("variable-id")+']"]').val(digi_evaluation_method.$(e).data("seuil-id")))},close_modal:function(i){var e={},t=0;digi_evaluation_method.$(".wpdigi-method-evaluation-render .wp-digi-eval-evarisk:visible").find('input[type="hidden"]:not(.digi-method-evaluation-id)').each(function(i,n){e[digi_evaluation_method.$(n).attr("variable-id")]=digi_evaluation_method.$(n).val(),""!==digi_evaluation_method.$(n).val()&&t++});var n={action:"get_scale",_wpnonce:digi_evaluation_method.$(i).data("nonce"),list_variable:e};return 5===t?(digi_evaluation_method.$(i).addClass("wp-digi-loading"),digi_evaluation_method.$.post(window.ajaxurl,n,function(e){digi_evaluation_method.$(".wpdigi-method-evaluation-render").hide(),digi_evaluation_method.$(i).closest(".wp-digi-list-item").find('input[name="method_evaluation_id"]').val(digi_evaluation_method.$(i).closest(".wpdigi-method-evaluation-render").find("input.digi-method-evaluation-id").val()),digi_evaluation_method.$(i).closest(".wp-digi-list-item").find(".wp-digi-risk-list-column-cotation > div").attr("class","wp-digi-risk-level-new wp-digi-risk-level-"+e.data.scale),digi_evaluation_method.$(i).closest(".wp-digi-list-item").find('input[name="risk_evaluation_level"]').val(e.data.scale),digi_evaluation_method.$(i).removeClass("wp-digi-loading")})):digi_evaluation_method.$(".wpdigi-method-evaluation-render").hide(),!1}},digi_evaluator={$:void 0,event:function(i){digi_evaluator.$=i,digi_evaluator.$(document).on("click",'.wp-digi-evaluator-list input[type="checkbox"]',function(){digi_evaluator.add_time(digi_evaluator.$(this))}),digi_evaluator.$(document).on("click",'.wp-form-evaluator-to-assign input[type="submit"]',function(i){digi_evaluator.add_evaluator(i,digi_evaluator.$(this))}),digi_evaluator.$(document).on("click",".wp-digi-list-evaluator .wp-digi-action-delete",function(i){digi_evaluator.delete_evaluator(i,digi_evaluator.$(this))}),digi_evaluator.$(document).on("click",".wp-form-evaluator-to-assign .wp-digi-pagination a",function(i){digi_evaluator.pagination(i,digi_evaluator.$(this))})},add_time:function(i){digi_evaluator.$(i).closest("li").find(".period-assign input").val(digi_evaluator.$('.wp-digi-evaluator-list .wp-digi-table-header input[type="text"]').val())},add_evaluator:function(i,e){i.preventDefault(),digi_evaluator.$(".wp-digi-list-evaluator").addClass("wp-digi-bloc-loading"),digi_evaluator.$(e).closest("form").ajaxSubmit(function(i){digi_evaluator.$(".wp-digi-list-evaluator").replaceWith(i.data.template)})},delete_evaluator:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){digi_evaluator.$(".wp-digi-list-evaluator").addClass("wp-digi-bloc-loading");var t={action:"detach_evaluator",id:digi_evaluator.$(e).data("id"),user_id:digi_evaluator.$(e).data("user-id"),global:digi_evaluator.$(e).data("global"),affectation_id:digi_evaluator.$(e).data("affectation-data-id")};digi_evaluator.$.post(window.ajaxurl,t,function(i){digi_evaluator.$(".wp-digi-list-evaluator").replaceWith(i.data.template)})}},pagination:function(i,e){i.preventDefault();var t=digi_evaluator.$(e).attr("href").split("&"),n=t[1].replace("current_page=",""),d=t[2].replace("element_id=",""),a={action:"paginate_evaluator",element_id:d,next_page:n};digi_evaluator.$(".wp-form-evaluator-to-assign").load(window.ajaxurl,a,function(){})}},file_management={file_frame:void 0,element_id:void 0,have_thumbnail:void 0,object_name:void 0,_wpnonce:void 0,$:void 0,event:function(i){file_management.$=i,file_management.$(document).on("click","span.wpeo-upload-media, a.wpeo-upload-media",function(i){file_management.open_popup(i,file_management.$(this))})},open_popup:function(i,e){i.preventDefault(),file_management.element_id=file_management.$(e).data("id"),file_management._wpnonce=file_management.$(e).data("nonce"),file_management.object_name=file_management.$(e).data("object-name"),file_management.have_thumbnail=!!file_management.$(e).hasClass("wp-digi-element-thumbnail"),window.wp.media.model.settings.post.id=file_management.$(e).data("id"),0===file_management.$(e).find(".wpeo-gallery").length?file_management.load_media_upload(e):window.wpeo_gallery.open(e)},load_media_upload:function(i){file_management.file_frame=window.wp.media.frames.file_frame=window.wp.media({title:file_management.$(i).data("uploader_title"),button:{text:file_management.$(i).data("uploader_button_text")},multiple:!1}),file_management.file_frame.on("select",function(){file_management.selected_file(i)}),file_management.open_media_upload()},open_media_upload:function(){file_management.file_frame.open()},selected_file:function(i){var e,t,n=file_management.file_frame.state().get("selection");n.map(function(i){e=i.toJSON(),t=i.id}),0===file_management.element_id?file_management.display_attachment(e,i):file_management.associate_file(t)},display_attachment:function(i,e){file_management.$(e).find("img").attr("src",i.url).show(),file_management.$(e).find("i").hide(),file_management.$(e).find('input[name="file_id"]').val(i.id)},associate_file:function(i){file_management.$('span.wpeo-upload-media[data-id="'+file_management.element_id+'"]').addClass("wp-digi-bloc-loading");var e={action:"eo_associate_file",file_id:i,_wpnonce:file_management._wpnonce,element_id:file_management.element_id,object_name:file_management.object_name,thumbnail:file_management.have_thumbnail};file_management.$.post(window.ajaxurl,e,function(i){file_management.$('span.wpeo-upload-media[data-id="'+file_management.element_id+'"]').replaceWith(i.data.template)})}},wpeo_gallery={$:void 0,event:function(i){wpeo_gallery.$=i,wpeo_gallery.$(document).on("keyup",function(i){wpeo_gallery.keyup(i,wpeo_gallery.$(this))}),wpeo_gallery.$(document).on("click",".wpeo-gallery",function(i){return i.preventDefault(),!1}),wpeo_gallery.$(document).on("click",".wpeo-gallery .prev",function(i){wpeo_gallery.prev(i,wpeo_gallery.$(this))}),wpeo_gallery.$(document).on("click",".wpeo-gallery .next",function(i){wpeo_gallery.next(i,wpeo_gallery.$(this))}),wpeo_gallery.$(document).on("click",".wpeo-gallery .set-as-thumbnail",function(i){wpeo_gallery.set_thumbnail(i,wpeo_gallery.$(this))}),wpeo_gallery.$(document).on("click",".wpeo-gallery .close",function(i){wpeo_gallery.close(i)})},keyup:function(i){37==i.keyCode?wpeo_gallery.$(".wpeo-gallery .prev").click():39==i.keyCode?wpeo_gallery.$(".wpeo-gallery .next").click():27==i.keyCode&&wpeo_gallery.$(".wpeo-gallery .close").click()},open:function(i){wpeo_gallery.$(i).find(".wpeo-gallery").show()},prev:function(i,e){i.preventDefault(),wpeo_gallery.$(e).closest("div").find(".image-list li.current").prev().length<=0?(wpeo_gallery.$(e).closest("div").find(".image-list li.current").toggleClass("current hidden"),wpeo_gallery.$(e).closest("div").find(".image-list li:last").toggleClass("hidden current")):wpeo_gallery.$(e).closest("div").find(".image-list li.current").toggleClass("current hidden").prev().toggleClass("hidden current")},next:function(i,e){i.preventDefault(),wpeo_gallery.$(e).closest("div").find(".image-list li.current").next().length<=0?(wpeo_gallery.$(e).closest("div").find(".image-list li.current").toggleClass("current hidden"),wpeo_gallery.$(e).closest("div").find(".image-list li:first").toggleClass("hidden current")):wpeo_gallery.$(e).closest("div").find(".image-list li.current").toggleClass("current hidden").next().toggleClass("hidden current")},set_thumbnail:function(i,e){var t={action:"eo_set_thumbnail",element_id:wpeo_gallery.$(e).closest("div").data("id"),thumbnail_id:wpeo_gallery.$(e).closest("div").find("li.current").data("id")};wpeo_gallery.$.post(window.ajaxurl,t,function(i){wpeo_gallery.$('span.wpeo-upload-media[data-id="'+window.file_management.element_id+'"]').find(".wp-post-image").replaceWith(i.data.template)})},close:function(){wpeo_gallery.$(".wpeo-gallery").hide()}},digi_installer={$:void 0,event:function(i){digi_installer.$=i,window.digi_installer_user.event(i),digi_installer.$(document).on("click",'.wpdigi-installer form input[type="button"]',function(){digi_installer.form_groupement(digi_installer.$(this))}),digi_installer.$(document).on("click",".wpdigi-staff .more-option",function(i){digi_installer.toggle_form(i,digi_installer.$(this))}),digi_installer.$(document).on("keyup",".wpdigi-staff .input-domain-mail",function(i){digi_installer.keyp_update_email(i,digi_installer.$(this))}),digi_installer.$(document).on("keyup",'#wp-digi-form-add-staff input[name="user[option][user_info][lastname]"]',function(i){digi_installer.keyp_update_email(i,digi_installer.$(this))}),digi_installer.$(document).on("keyup",'#wp-digi-form-add-staff input[name="user[option][user_info][firstname]"]',function(i){digi_installer.keyp_update_email(i,digi_installer.$(this))}),digi_installer.$(document).on("click",".wp-digi-action-save-domain-mail",function(i){digi_installer.save_domain_mail(i,digi_installer.$(this))})},form_groupement:function(i){digi_installer.$(i).closest("form").ajaxSubmit({beforeSubmit:function(){return""===digi_installer.$('.wpdigi-installer input[name="groupement[title]"]').val()?(digi_installer.$('.wpdigi-installer input[name="groupement[title]"]').css("border-bottom","solid red 2px"),!1):(digi_installer.$(i).closest("div").addClass("wp-digi-bloc-loading"),void digi_installer.$('.wpdigi-installer input[name="groupement[title]"]').css("border-bottom","2px solid #272a35"))},success:function(){digi_installer.$(i).closest("div").hide(),digi_installer.$(".wpdigi-installer .wpdigi-staff").fadeIn(),digi_installer.$(".wpdigi-installer ul.step li:first").removeClass("active"),digi_installer.$(".wpdigi-installer ul.step li:last").addClass("active"),digi_installer.$("#toplevel_page_digi-setup a").attr("href",digi_installer.$("#toplevel_page_digi-setup a").attr("href").replace("digi-setup","digirisk-simple-risk-evaluation"))}})},keyp_update_email:function(i){digi_installer.$(".wpdigi-staff input[name='user[email]']").val(digi_installer.$('.wpdigi-staff input[name="user[option][user_info][firstname]"]').val()+"."+digi_installer.$('.wpdigi-staff input[name="user[option][user_info][lastname]"]').val()+"@"+digi_installer.$(".wpdigi-staff .input-domain-mail").val()),13==i.keyCode&&digi_installer.$(".wpdigi-staff .add-staff").click()},save_domain_mail:function(i,e){i.preventDefault(),digi_installer.$(e).closest("li").addClass("wp-digi-bloc-loading");var t={action:"save_domain_mail",_wpnonce:digi_installer.$(e).data("nonce"),domain_mail:digi_installer.$(e).closest(".form-element").find("input").val()};digi_installer.$.post(window.ajaxurl,t,function(){digi_installer.$(e).closest("li").removeClass("wp-digi-bloc-loading")})},save_last_step:function(){digi_installer.$(".wpdigi-installer .dashicons-plus:last").click()},toggle_form:function(i,e){i.preventDefault(),digi_installer.$(e).find(".dashicons").toggleClass("dashicons-plus dashicons-minus"),digi_installer.$(e).closest("form").find(".form-more-option").toggle()}},digi_installer_user={$:void 0,event:function(i){digi_installer_user.$=i,digi_installer_user.$(document).on("click",".wpdigi-staff .add-staff",function(i){digi_installer_user.add_staff(i,digi_installer_user.$(this))}),digi_installer_user.$(document).on("click",".wpdigi-staff .wp-digi-action-load",function(i){digi_installer_user.load_staff(i,digi_installer_user.$(this))}),digi_installer_user.$(document).on("click",".wpdigi-staff .wp-digi-action-edit",function(i){digi_installer_user.edit_staff(i,digi_installer_user.$(this))}),digi_installer_user.$(document).on("click",".wpdigi-staff .wp-digi-action-delete",function(i){digi_installer_user.delete_staff(i,digi_installer_user.$(this))})},add_staff:function(i){i.preventDefault(),""!==digi_installer_user.$('.wpdigi-staff input[name="option[user_info][lastname]"]').val()&&(digi_installer_user.$(".wp-digi-list-staff").addClass("wp-digi-bloc-loading"),digi_installer_user.$("#wp-digi-form-add-staff").ajaxSubmit({beforeSubmit:function(){return window.regex.validateEmail(digi_installer_user.$('.wpdigi-staff input[name="user[email]"]').val())?void 0:(digi_installer_user.$(".wp-digi-list-staff").removeClass("wp-digi-bloc-loading"),!1)},success:function(i){digi_installer_user.$(".wp-digi-list-staff").removeClass("wp-digi-bloc-loading"),digi_installer_user.$(".wp-digi-list-staff").append(i.data.template),digi_installer_user.$('.wpdigi-staff input[name="user[option][user_info][firstname]"]').val(""),digi_installer_user.$('.wpdigi-staff input[name="user[option][user_info][lastname]"]').val(""),digi_installer_user.$(".wpdigi-staff input[name='user[email]']").val(digi_installer_user.$('.wpdigi-staff input[name="user[option][user_info][firstname]"]').val()+"."+digi_installer_user.$('.wpdigi-staff input[name="user[option][user_info][lastname]"]').val()+"@"+digi_installer_user.$(".wpdigi-staff .input-domain-mail").val()),digi_installer_user.$('.wpdigi-staff input[name="user[option][user_info][lastname]"]').focus()}}))},load_staff:function(i,e){i.preventDefault();var t=digi_installer_user.$(e).data("id");digi_installer_user.$('.wp-digi-list-item[data-id="'+t+'"]').addClass("wp-digi-bloc-loading");var n={action:"load_user",_wpnonce:digi_installer_user.$(e).data("nonce"),user_id:t};digi_installer_user.$.post(window.ajaxurl,n,function(i){digi_installer_user.$('.wp-digi-list-item[data-id="'+t+'"]').replaceWith(i.data.template)})},edit_staff:function(i,e){var t=digi_installer_user.$(e).closest("form").data("id");""!==digi_installer_user.$(e).closest("form").find('input[name="option[user_info][lastname]"]').val()&&(digi_installer_user.$(e).closest("form").addClass("wp-digi-bloc-loading"),digi_installer_user.$(e).closest("form").ajaxSubmit({beforeSubmit:function(){return window.regex.validateEmail(digi_installer_user.$(e).closest("form").find('input[name="user[email]"]').val())?void 0:(digi_installer_user.$(e).closest("form").removeClass("wp-digi-bloc-loading"),!1)},success:function(i){digi_installer_user.$('.wp-digi-list-item[data-id="'+t+'"]').replaceWith(i.data.template)}}))},delete_staff:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t=digi_installer_user.$(e).data("id");digi_installer_user.$('.wp-digi-list-staff .wp-digi-list-item[data-id="'+t+'"]').fadeOut();var n={action:"delete_user",_wpnonce:digi_installer_user.$(e).data("nonce"),user_id:t};digi_installer_user.$.post(window.ajaxurl,n,function(){})}}},legal_display={$:void 0,init:function(i){legal_display.$=i,legal_display.init_form()},init_form:function(){var i={beforeSubmit:function(){legal_display.$(".form-legal-display .generate-legal-display").addClass("wp-digi-loading")},success:function(){legal_display.$(".form-legal-display .generate-legal-display").removeClass("wp-digi-loading"),legal_display.$('.wp-digi-global-sheet-tab li[data-action="digi-sheet"]').click()}};legal_display.$(document).on("click",".form-legal-display button",function(){return legal_display.$(this).closest("form").ajaxSubmit(i),!1})}},digi_recommendation={old_recommendation_name:void 0,old_thumbnail:void 0,$:void 0,init:function(i,e){digi_recommendation.$=e,digi_recommendation.old_recommendation_name=digi_recommendation.$(".wp-digi-recommendation-item-new toggle").html(),digi_recommendation.old_thumbnail=digi_recommendation.$(".wp-digi-recommendation-item-new .wp-digi-recommendation-thumbnail").html(),(i||void 0===i)&&digi_recommendation.event()},event:function(){digi_recommendation.$(document).on("click",".wp-digi-recommendation-item-new .wp-digi-select-list li",function(i){digi_recommendation.select_recommendation(i,digi_recommendation.$(this))}),digi_recommendation.$(document).on("click",".wp-digi-recommendation-item-new .dashicons-plus",function(i){digi_recommendation.add_recommendation(i,digi_recommendation.$(this))}),digi_recommendation.$(document).on("click",".wp-digi-recommendation-item .wp-digi-action-load",function(i){digi_recommendation.load_recommendation(i,digi_recommendation.$(this))}),digi_recommendation.$(document).on("click",".wp-digi-recommendation-item .wp-digi-action-edit",function(i){digi_recommendation.edit_recommendation(i,digi_recommendation.$(this))}),digi_recommendation.$(document).on("click",".wp-digi-recommendation-item .wp-digi-action-delete",function(i){digi_recommendation.delete_recommendation(i,digi_recommendation.$(this))})},select_recommendation:function(i,e){digi_recommendation.$(".wp-digi-recommendation-item-new input[name=recommendation_id]").val(digi_recommendation.$(e).data("id")),digi_recommendation.$(".wp-digi-recommendation-item-new .wp-digi-select-list").toggle(),digi_recommendation.$(".wp-digi-recommendation-item-new .wp-digi-recommendation-thumbnail i").hide(),digi_recommendation.$(".wp-digi-recommendation-item-new toggle").html(digi_recommendation.$(e).data("name")),digi_recommendation.$(".wp-digi-recommendation-item-new .wp-digi-recommendation-thumbnail .attachment-digirisk-element-miniature").attr("src",digi_recommendation.$(e).data("url")).show()},add_recommendation:function(i,e){i.preventDefault(),digi_recommendation.$(".wp-digi-recommendation-item-new").addClass("wp-digi-bloc-loading"),digi_recommendation.$(e).closest("form").ajaxSubmit({success:function(i){digi_recommendation.$(".wp-digi-recommendation-item-new").removeClass("wp-digi-bloc-loading"),digi_recommendation.$(".wp-digi-recommendation.wp-digi-list").append(i.data.template),digi_recommendation.$(".wp-digi-recommendation-item-new toggle").html(digi_recommendation.old_recommendation_name),digi_recommendation.$('.wp-digi-recommendation-item-new input[name="recommendation_id"]').val(""),digi_recommendation.$('.wp-digi-recommendation-item-new input[name="recommendation_comment"]').val(""),digi_recommendation.$(".wp-digi-recommendation-item-new .wp-digi-recommendation-thumbnail").html(digi_recommendation.old_thumbnail)}})},load_recommendation:function(i,e){i.preventDefault();var t={action:"wpdigi-load-recommendation",_wpnonce:digi_recommendation.$(e).data("nonce"),workunit_id:digi_recommendation.$(e).data("workunit-id"),term_id:digi_recommendation.$(e).data("id"),index:digi_recommendation.$(e).data("index")};digi_recommendation.$.post(window.ajaxurl,t,function(i){digi_recommendation.$(e).closest(".wp-digi-recommendation-item").replaceWith(i.data.template)})},edit_recommendation:function(i,e){digi_recommendation.$(e).closest(".wp-digi-recommendation-item").addClass("wp-digi-bloc-loading"),digi_recommendation.$(e).closest("form").ajaxSubmit({success:function(i){digi_recommendation.$(e).closest(".wp-digi-recommendation-item").replaceWith(i.data.template)}})},delete_recommendation:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t=digi_recommendation.$(e).data("workunit-id"),n=digi_recommendation.$(e).data("id"),d=digi_recommendation.$(e).data("index"),a=digi_recommendation.$(e).data("nonce"),o={action:"wpdigi-delete-recommendation",_wpnonce:a,workunit_id:t,term_id:n,index:d};digi_recommendation.$(e).closest(".wp-digi-recommendation-item").fadeOut(),digi_recommendation.$.post(window.ajaxurl,o,function(){})}}},digi_risk={old_date:void 0,button:void 0,old_cotation:void 0,$:void 0,init:function(i,e){digi_risk.$=e,window.digi_risk_comment.event(digi_risk.$),window.digi_danger.init(i,digi_risk.$),(i||void 0===i)&&digi_risk.event(),this.old_date=digi_risk.$('.wp-digi-risk-item-new input[name="risk_comment_date"]').val(),this.old_cotation=digi_risk.$(".wp-digi-risk-item-new .wp-digi-risk-level-new").html()},event:function(){digi_risk.$(document).on("click",".wp-digi-risk-item-new .wp-digi-action-new",function(i){digi_risk.create_risk(i,digi_risk.$(this))}),digi_risk.$(document).on("click",".wp-digi-risk .wp-digi-action-delete",function(i){digi_risk.delete_risk(i,digi_risk.$(this))}),digi_risk.$(document).on("click",".wp-digi-risk .wp-digi-action-load",function(i){digi_risk.load_risk(i,digi_risk.$(this))}),digi_risk.$(document).on("click",".wp-digi-risk .wp-digi-action-edit",function(i){digi_risk.edit_risk(i,digi_risk.$(this))})},create_risk:function(i,e){return digi_risk.$(e).closest("form").ajaxSubmit({beforeSubmit:function(){var i=!1;return"0"===digi_risk.$(e).closest("form").find('input[name="method_evaluation_id"]').val()&&(digi_risk.$(e).closest("form").find(".wp-digi-risk-list-column-cotation").css("border","solid red 2px"),i=!0),""===digi_risk.$(e).closest("form").find('input[name="danger_id"]').val()&&(digi_risk.$(e).closest("form").find(".wp-digi-summon-list").css("border","solid red 2px"),i=!0),digi_risk.$(e).closest("form").find('input[name="list_comment[0][comment_date]"]').val()||(digi_risk.$(e).closest("form").find('input[name="list_comment[0][comment_date]"]').css("border","solid red 2px"),i=!0),i?!1:(digi_risk.$(e).closest("form").find(".wp-digi-risk-list-column-cotation").css("border","none"),digi_risk.$(e).closest("form").find(".wp-digi-summon-list").css("border","1px solid rgba(0,0,0,.2)"),digi_risk.$(e).closest("form").find('input[name="risk_comment_date"]').css("border","none"),void digi_risk.$(".wp-digi-content").addClass("wp-digi-bloc-loading"))},success:function(i){digi_risk.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_risk.$(".wp-digi-risk.wp-digi-list").replaceWith(i.data.template),digi_risk.reset_create_form()}}),!1},delete_risk:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t=digi_risk.$(e).data("id");digi_risk.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var n={action:"wpdigi-delete-risk",_wpnonce:digi_risk.$(e).data("nonce"),global:digi_risk.$(e).data("global"),risk_id:t};digi_risk.$.post(window.ajaxurl,n,function(){digi_risk.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_risk.$('.wp-digi-list .wp-digi-list-item[data-risk-id="'+t+'"]').fadeOut()})}},load_risk:function(i,e){i.preventDefault(),digi_risk.send_risk();var t=digi_risk.$(e).data("id");digi_risk.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var n={action:"wpdigi-load-risk",_wpnonce:digi_risk.$(e).data("nonce"),global:digi_risk.$(e).data("global"),risk_id:t};digi_risk.$.post(window.ajaxurl,n,function(i){digi_risk.$(".wp-digi-list-item .dashicons-edit").hide(),digi_risk.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_risk.$('.wp-digi-risk .wp-digi-list-item[data-risk-id="'+t+'"]').replaceWith(i.data.template),digi_risk.$('.wp-digi-risk .wp-digi-list-item[data-risk-id="'+t+'"] .wpdigi-method-evaluation-render').html(i.data.table_evaluation_method),digi_risk.$(".wpdigi_date").datepicker({dateFormat:"dd/mm/yy"})})},edit_risk:function(i,e){i.preventDefault();digi_risk.$(e).data("id");digi_risk.$(".wp-digi-content").addClass("wp-digi-bloc-loading"),digi_risk.$(e).closest("form").ajaxSubmit({success:function(i){digi_risk.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_risk.$(".wp-digi-list-item .dashicons-edit").show(),digi_risk.$(".wp-digi-risk.wp-digi-list").replaceWith(i.data.template)}})},send_risk:function(){digi_risk.$(".wp-digi-table-item-edit").each(function(){digi_risk.$(this).find(".dashicons-edit").click()})},reset_create_form:function(){digi_risk.$(".wp-digi-risk-item-new .wp-digi-risk-level-new").html(digi_risk.old_cotation);var i=digi_risk.$(".wp-digi-risk-item-new .wp-digi-risk-list-column-cotation div")[0];i.className=i.className.replace(/wp-digi-risk-level-[0-4]/,"wp-digi-risk-level-0"),digi_risk.$('.wp-digi-risk-item-new input[name="risk_evaluation_level"]').val(""),digi_risk.$('.wp-digi-risk-item-new input[name="method_evaluation_id"]').val("0"),window.digi_risk_comment.reset_create_form(),window.digi_danger.reset_create_form()}},digi_risk_comment={$:void 0,event:function(i){digi_risk_comment.$=i,digi_risk_comment.$(document).on("click",".wp-digi-action-comment-delete",function(i){digi_risk_comment.delete_comment(i,digi_risk_comment.$(this))})},delete_comment:function(i,e){if(window.confirm(window.digi_confirm_delete)){var t={action:"delete_comment",_wpnonce:digi_risk_comment.$(e).data("nonce"),risk_id:digi_risk_comment.$(e).data("risk-id"),id:digi_risk_comment.$(e).data("id")};digi_risk_comment.$(e).closest("li").remove(),digi_risk_comment.$.post(window.ajaxurl,t,function(){})}},reset_create_form:function(){digi_risk_comment.$(".wp-digi-risk-item-new .wp-digi-risk-comment textarea").val("")}},digi_search={$:void 0,event:function(i){digi_search.$=i,digi_search.$.each(digi_search.$(".wp-list-search input"),function(i,e){var t={source:"admin-ajax.php?action=digi_search&next_action="+digi_search.$(e).data("next-action")+"&class="+digi_search.$(e).data("class")+"&id="+digi_search.$(e).data("id")+"&type="+digi_search.$(e).data("type"),minLength:0};digi_search.$(e).data("target")&&(t.search=function(){digi_search.$("."+digi_search.$(e).data("target")).addClass("wp-digi-bloc-loading")},t.response=function(i,t){digi_search.$("."+digi_search.$(e).data("target")).replaceWith(t.content[1].template)},t.open=function(){digi_search.$(e).autocomplete("close")}),digi_search.$(e).data("field")&&(t.select=function(i,t){digi_search.$('input[name="'+digi_search.$(e).data("field")+'"]').val(t.item.id),digi_global.$(".wp-digi-group-action-container").removeClass("hidden"),digi_global.$(".wp-digi-group-action-container .wp-digi-bton-fourth").text("DÃ©placer")}),digi_search.$(e).autocomplete(t)})}},digi_society={$:void 0,event:function(i){digi_society.$=i,digi_society.$(document).on("keyup",'input[name="establishment_name"]',function(i){digi_society.identity_edition_mode(i,digi_society.$(this))}),digi_society.$(document).on("click",".wp-digi-societytree-left-container .wp-digi-global-name",function(i){digi_society.load_society(i,digi_society.$(this))}),digi_society.$(document).on("click",".wp-digi-global-sheet-header button.wp-digi-save-identity-button",function(i){digi_society.save_society(i,digi_society.$(this))}),digi_society.$(document).on("click",".wp-digi-global-sheet-header .wp-digi-delete-action",function(i){digi_society.delete_society(i,digi_society.$(this))})},identity_edition_mode:function(i,e){digi_society.$(e).closest(".wp-digi-global-sheet-header").find(".wp-digi-global-action-container").removeClass("hidden"),digi_society.$(e).addClass("active"),digi_global.$(".wp-digi-group-action-container .wp-digi-bton-fourth").text("Enregistrer")},load_society:function(i,e){digi_society.$(".wp-digi-group-selector .digi-popup").hide(),digi_society.$(e).closest("ul").find("li.active").removeClass("active"),digi_society.$(e).closest("li").addClass("active"),digi_society.$(".wp-digi-societytree-right-container").addClass("wp-digi-bloc-loading");var t={action:"load_sheet_display",element_id:digi_society.$(e).closest("li").data("id"),tab_to_display:"digi-risk"};digi_society.$.post(window.ajaxurl,t,function(i){digi_society.$(".wp-digi-societytree-right-container").removeClass("wp-digi-bloc-loading"),digi_society.$(".wp-digi-societytree-right-container").html(i.data.template),digi_society.$(".wp-digi-societytree-left-container").html(i.data.template_left),window.digi_global.init(digi_society.$),window.digi_risk.init(!1,digi_society.$),window.digi_search.event(digi_society.$)})},save_society:function(i,e){digi_society.$(e).addClass("wp-digi-loading");var t=digi_society.$(e).closest(".wp-digi-sheet").data("id"),n={action:"save_society",
element_id:t,parent_id:digi_society.$('input[name="group_id"]').val(),title:digi_society.$('input[name="establishment_name"]').val()};digi_society.$.post(window.ajaxurl,n,function(i){digi_society.$(".wp-digi-societytree-left-container").html(i.data.template_left),digi_society.$(e).removeClass("wp-digi-loading"),digi_society.$(".wp-digi-global-sheet-header .wp-digi-global-action-container").addClass("hidden"),digi_society.$(".wp-digi-global-sheet-header .wp-list-search input").val("")},"json")},delete_society:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t={action:"delete_society",element_id:digi_society.$(e).data("id")};digi_society.$(".wp-digi-societytree-main-container").addClass("wp-digi-bloc-loading"),digi_society.$.post(window.ajaxurl,t,function(){digi_society.$(".wp-digi-societytree-main-container").removeClass("wp-digi-bloc-loading")})}}},digi_workunit={$:void 0,event:function(i){digi_workunit.$=i,digi_workunit.$(".wp-digi-societytree-left-container").on("keypress","input[name='workunit[title]']",function(i){digi_workunit.call_create_workunit(i)}),digi_workunit.$(".wp-digi-societytree-left-container").on("click",".wp-digi-new-workunit-action",function(i){digi_workunit.create_workunit(i,digi_workunit.$(this))}),digi_workunit.$(document).on("click",".wp-digi-list-workunit .wp-digi-action-delete",function(i){digi_workunit.delete_workunit(i,digi_workunit.$(this))}),digi_workunit.$(".wp-digi-societytree-right-container").on("click","#wpdigi-save-element-sheet",function(i){digi_workunit.save_element_sheet(i,digi_workunit.$(this))}),digi_workunit.$(".wp-digi-societytree-right-container").on("click",".wp-digi-list-document .wp-digi-action-delete",function(i){digi_workunit.delete_element_sheet(i,digi_workunit.$(this))}),digi_workunit.$(document).on("click",".wp-digi-sheet-tab-toggle",function(){window.digi_global.responsive_menu_toggle(digi_workunit.$(this))}),digi_workunit.$(document).on("click",".wp-digi-sheet-tab-responsive-content > li",function(){window.digi_global.responsive_menu_toggle(digi_workunit.$(this))})},call_create_workunit:function(i){13==i.keyCode&&(i.preventDefault(),digi_workunit.$(".wp-digi-societytree-left-container .wp-digi-new-workunit-action").click())},create_workunit:function(i){i.preventDefault(),digi_workunit.$("#wpdigi-workunit-creation-form").ajaxSubmit({dataType:"json",beforeSubmit:function(){digi_workunit.$(".wp-digi-societytree-left-container").addClass("wp-digi-bloc-loading")},success:function(i){digi_workunit.$(".wp-digi-societytree-left-container").removeClass("wp-digi-bloc-loading"),digi_workunit.$(".wp-digi-list-workunit").prepend(i.output),digi_workunit.$(".wp-digi-workunit-"+i.element.id+" .wp-digi-global-name").click(),digi_workunit.$("#wpdigi-workunit-creation-form input[type='text']").val(""),window.digi_search.event(digi_workunit.$)}})},delete_workunit:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){var t={action:"delete_society",element_id:digi_workunit.$(e).data("id")};digi_workunit.$(e).closest("li").fadeOut(),digi_workunit.$.post(window.ajaxurl,t,function(){})}},delete_element_sheet:function(i,e){i.preventDefault();var t={action:"wpdigi_delete_sheet",parent_id:digi_workunit.$(e).data("parent-id"),element_id:digi_workunit.$(e).data("id"),global:digi_workunit.$(e).data("global")};digi_workunit.$(e).closest("li").fadeOut(),digi_workunit.$.post(window.ajaxurl,t,function(){})},save_element_sheet:function(i,e){i.preventDefault();var t={beforeSubmit:function(){digi_workunit.$(e).addClass("wp-digi-loading")},success:function(i){digi_workunit.$(e).removeClass("wp-digi-loading"),i.success&&(void 0!==digi_workunit.$(".wp-digi-global-sheet-content ul.wp-digi-list-document").html()?digi_workunit.$(".wp-digi-global-sheet-content ul.wp-digi-list-document").prepend(i.data.output):digi_workunit.$(".wp-digi-global-sheet-tab li.wp-digi-sheet-generation-button").click())},dataType:"json",resetForm:!0};digi_workunit.$("#wpdigi-save-element-form").ajaxSubmit(t)}},digi_group={$:void 0,event:function(i){digi_group.$=i,digi_group.$(document).on("keyup",'input[name="wp-digi-group-name"]',function(i){digi_group.identity_edition_mode(i,digi_group.$(this))}),digi_group.$(document).on("click","#wp-digi-save-group-identity-button",function(i){digi_group.save_identity(i,digi_group.$(this))}),digi_group.$(document).on("click",".wp-digi-group-selector .wp-digi-new-group-action a",function(i){digi_group.create_group(i,digi_group.$(this))}),digi_group.$(document).on("click",".wp-digi-duer-form-display",function(i){digi_group.display_form_duer(i,digi_group.$(this))}),digi_group.$(".wp-digi-societytree-right-container").on("click",".wp-digi-duer-generation-button",function(i){digi_group.save_element_sheet(i,digi_group.$(this))}),digi_group.$(document).on("click",".wp-digi-form-save-configuration button",function(i){digi_group.save_configuration(i,digi_group.$(this))})},identity_edition_mode:function(i,e){digi_group.$(".wp-digi-group-action-container").removeClass("hidden"),digi_group.$(e).addClass("active"),digi_group.$(".wp-digi-societytree-left-container toggle span").html(digi_group.$(e).val()),digi_group.$(".wp-digi-group-action-container .wp-digi-bton-fourth").text("Enregistrer")},save_identity:function(i,e){digi_group.$(e).addClass("wp-digi-loading");var t=digi_group.$(e).closest(".wp-digi-group-sheet").data("id"),n={action:"wpdigi_ajax_group_update",_wpnonce:digi_group.$(e).data("nonce"),group_id:t,send_to_group_id:digi_group.$('input[name="wp-digi-group-id"]').val(),title:digi_group.$('input[name="wp-digi-group-name"]').val()};digi_group.$.post(window.ajaxurl,n,function(i){digi_group.$(e).removeClass("wp-digi-loading"),digi_group.$(e).removeClass("active"),digi_group.$(e).closest(".wp-digi-group-sheet-header").find(".wpdigi-auto-complete").val(""),digi_group.$(e).closest(".wp-digi-group-sheet-header").find('input[name="wp-digi-group-id"]').val("0"),void 0!==i.data.template_left&&digi_group.$(".wp-digi-societytree-left-container").html(i.data.template_left),digi_group.$(".wp-digi-group-action-container").addClass("hidden")})},create_group:function(i,e){i.preventDefault();var t=digi_group.$(e).data("id");digi_group.$(".wp-digi-group-selector .wp-digi-develop-list").toggle(),digi_group.$(".wp-digi-societytree-main-container").addClass("wp-digi-bloc-loading");var n={action:"wpdigi-create-group",group_id:t};digi_group.$.post(window.ajaxurl,n,function(i){digi_group.$(".wp-digi-societytree-main-container").removeClass("wp-digi-bloc-loading"),digi_group.$(".wp-digi-societytree-left-container").html(i.data.template_left),digi_group.$(".wp-digi-societytree-right-container").html(i.data.template_right),window.digi_global.init(digi_group.$),window.digi_search.event(digi_group.$)})},display_form_duer:function(i,e){i.preventDefault(),digi_group.$(".wp-digi-societytree-right-container").addClass("wp-digi-bloc-loading");var t={action:"load_sheet_display",element_id:digi_group.$(e).data("id"),tab_to_display:"digi-generate-sheet"};digi_group.$.post(window.ajaxurl,t,function(i){digi_group.$(".wp-digi-societytree-right-container").html(i.data.template),digi_group.$(".wp-digi-societytree-right-container").removeClass("wp-digi-bloc-loading")})},save_element_sheet:function(i,e){i.preventDefault();var t={beforeSubmit:function(){digi_group.$(e).addClass("wp-digi-loading")},success:function(){digi_group.$(e).removeClass("wp-digi-loading"),digi_group.$(".wp-digi-global-sheet-tab li[data-action='digi-sheet']").click()},dataType:"json"};digi_group.$("#wpdigi-save-element-form").ajaxSubmit(t)},save_configuration:function(i,e){i.preventDefault(),digi_group.$(e).closest("form").ajaxSubmit()}},digi_tab={$:void 0,event:function(i){digi_tab.$=i,digi_tab.$(".wp-digi-societytree-right-container").on("click",".wp-digi-global-sheet-tab li",function(i){digi_tab.click_tab(i,digi_tab.$(this))})},click_tab:function(i,e){if(i.preventDefault(),!digi_tab.$(e).hasClass("disabled")){var t=digi_tab.$(e).data("action");digi_tab.$(".wp-digi-global-sheet-tab li.active").removeClass("active"),digi_tab.$(e).addClass("active"),digi_tab.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var n={action:"load_tab_content",_wpnonce:digi_tab.$(e).data("nonce"),tab_to_display:t,element_id:digi_tab.$(e).closest(".wp-digi-sheet").data("id")};digi_tab.$.post(window.ajaxurl,n,function(i){digi_tab.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_tab.$(".wp-digi-content").html(i.data.template),window.digi_global.init(digi_tab.$),window.digi_search.event(digi_tab.$);var e=t.replace("-","_");window[e]&&window[e].init&&window[e].init(!1,digi_tab.$)},"json")}}},digi_tools={$:void 0,event:function(i){digi_tools.$=i,digi_tools.$(document).on("click",".reset-method-evaluation",function(i){digi_tools.reset(i,digi_tools.$(this))}),digi_tools.$(document).on("click",".digi-tools-main-container .nav-tab",function(i){digi_tools.tab_switcher(i,digi_tools.$(this))}),digi_tools.$(document).on("click",".element-risk-compilation",function(i){digi_tools.risk_fixer(i,digi_tools.$(this))})},tab_switcher:function(i,e){i.preventDefault(),digi_tools.$(e).closest("h2").children(".nav-tab").each(function(){digi_tools.$(this).removeClass("nav-tab-active")}),digi_tools.$(e).addClass("nav-tab-active"),digi_tools.$(e).closest(".digi-tools-main-container").children("div").each(function(){digi_tools.$(this).hide()}),digi_tools.$("#"+digi_tools.$(e).attr("data-id")).show()},reset:function(i,e){if(i.preventDefault(),window.confirm(window.digi_tools_confirm)){digi_tools.$(e).addClass("wp-digi-loading"),digi_tools.$(e).closest("div").find("ul").html("");var t=document.createElement("li");t.innerHTML=window.digi_tools_in_progress,digi_tools.$(e).closest("div").find("ul").append(t);var n={action:"reset_method_evaluation",_wpnonce:digi_tools.$(e).data("nonce")};digi_tools.exec_request(t,n,e)}},risk_fixer:function(i,e){i.preventDefault(),digi_tools.$(e).addClass("wp-digi-loading"),digi_tools.$(e).closest("div").find("ul").html("");var t=document.createElement("li");t.innerHTML=window.digi_tools_in_progress,digi_tools.$(e).closest("div").find("ul").append(t);var n={action:"compil_risk_list",_wpnonce:digi_tools.$(e).data("nonce")};digi_tools.exec_request(t,n,e)},exec_request:function(i,e,t){digi_tools.$.post(window.ajaxurl,e,function(){digi_tools.$(t).removeClass("wp-digi-loading"),i.innerHTML+=" "+window.digi_tools_done})}};jQuery(document).ready(function(){jQuery("#wpdigi-datastransfer-form").ajaxForm({dataType:"json",beforeSubmit:function(i,e){e.children("button.wp-digi-bton").addClass("wp-digi-loading")},success:function(i,e,t,n){if(n.children("button.wp-digi-bton").removeClass("wp-digi-loading"),!i.status&&i.reload_transfert)"element"==i.sub_action?(jQuery(".wpdigi-transfered-element-nb-"+i.element_type).html(i.main_element_nb),i.main_element_nb==jQuery(".wpdigi-to-transfer-element-nb-"+i.element_type).html()&&jQuery(".wp-digi-datastransfer-element-type-name-"+i.element_type).addClass("dashicons-before dashicons-yes"),jQuery(".wpdigi-transfered-element-nb-"+i.sub_element_type).html(i.sub_element_nb),i.sub_element_nb==jQuery(".wpdigi-to-transfer-element-nb-"+i.sub_element_type).html()&&jQuery(".wp-digi-datastransfer-element-type-name-"+i.sub_element_type).addClass("dashicons-before dashicons-yes")):"config_components"==i.old_sub_action?jQuery(".wp-digi-transfert-components").html(i.display_components_transfer):(jQuery(".wpdigi-transfered-element-nb-documents").html(i.transfered),jQuery(".wpdigi-not-transfered-element-nb-documents").html(i.not_transfered),i.transfered+i.not_transfered==jQuery(".wpdigi-to-transfer-element-nb-wpdigi-to-transfer-element-nb-documents").html()&&jQuery("wp-digi-datastransfer-element-type-name-documents").addClass("dashicons-before dashicons-yes")),n.children("input[name=element_type_to_transfert]").val(i.element_type),n.children("input[name=sub_action]").val(i.sub_action),n.submit();else if(i.status){jQuery("#wp-digi-transfert-message").html(i.message).show(),jQuery("#wpdigi-datastransfer-form .wp-digi-bton-first").hide();var d={action:"reset_method_evaluation",_wpnonce:jQuery('input[name="_wpnonce"]').val()};jQuery.post(ajaxurl,d,function(){setTimeout(function(){window.location.href=i.redirect_to_url},"1500")})}}}),jQuery("input[name=wpdigi-dtrans-userid-behaviour]").click(function(){if(jQuery(this).is(":checked"))jQuery(".wp-digi-dtrans-userid-options-container").html("").hide();else{var i={action:"wpdigi-dtrans-transfert-options-load",element_type:jQuery(this).closest("form").children("input[name=element_type_to_transfert]").val()};jQuery(".wp-digi-dtrans-userid-options-container").load(ajaxurl,i).show()}})});var digi_user={old_affected_user:void 0,$:void 0,event:function(i){digi_user.$=i,digi_user.$(document).on("keyup",'.wp-list-search input[name="user_name_affected"]',function(){digi_user.search_affected_user(digi_user.$(this))}),digi_user.$(document).on("click",'.wp-form-user-to-assign input[type="submit"]',function(i){digi_user.add_user(i,digi_user.$(this))}),digi_user.$(document).on("click",".wp-digi-list-affected-user .wp-digi-action-delete",function(i){digi_user.delete_user(i,digi_user.$(this))}),digi_user.$(document).on("click",".wp-form-user-to-assign .wp-digi-pagination a",function(i){digi_user.pagination(i,digi_user.$(this))})},search_affected_user:function(i){if(digi_user.old_affected_user!=digi_user.$(i).val())if(digi_user.old_affected_user=digi_user.$(i).val(),digi_user.$(i).val().length>2){digi_user.$(i).val();digi_user.$(i).closest("form").ajaxSubmit(function(e){digi_user.$(i).closest("div").find(".wp-digi-list").replaceWith(e.data.template)})}else digi_user.$(i).val().length<=0&&digi_user.$(i).closest("form").ajaxSubmit(function(e){digi_user.$(i).closest("div").find(".wp-digi-list").replaceWith(e.data.template)})},add_user:function(i,e){i.preventDefault(),digi_user.$(".wp-digi-content").addClass("wp-digi-bloc-loading"),digi_user.$(e).closest("form").ajaxSubmit(function(i){digi_user.render(i)})},delete_user:function(i,e){if(i.preventDefault(),window.confirm(window.digi_confirm_delete)){digi_user.$(".wp-digi-content").addClass("wp-digi-bloc-loading");var t={action:"detach_user",id:digi_user.$(e).data("id"),user_id:digi_user.$(e).data("user-id"),affectation_id:digi_user.$(e).data("affectation-data-id")};digi_user.$.post(window.ajaxurl,t,function(i){digi_user.render(i)})}},render:function(i){digi_user.$(".wp-digi-content").removeClass("wp-digi-bloc-loading"),digi_user.$(".wp-digi-content").html(i.data.template)},pagination:function(i,e){i.preventDefault();var t=digi_user.$(e).attr("href").split("&"),n=t[1].replace("current_page=",""),d=t[2].replace("element_id=",""),a={action:"paginate_user",element_id:d,next_page:n};digi_user.$(".wp-form-user-to-assign").load(window.ajaxurl,a,function(){})}};
